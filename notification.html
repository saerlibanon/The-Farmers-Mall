<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notifications â€“ The Farmer's Mall</title>

  <!-- Tailwind + Font Awesome -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- Include Header -->
  <div id="header"></div>

  <!-- Main Notifications Section -->
  <main class="max-w-5xl mx-auto px-6 py-10 mb-[35rem]">
    <h2 class="text-2xl font-semibold mb-6">Notifications</h2>

    <div id="notificationList" class="bg-white rounded-lg shadow-sm border border-gray-200 divide-y">
      <!-- Notifications will be dynamically inserted here -->
    </div>

    <!-- Mark all as read -->
    <div class="flex justify-end mt-6">
      <button id="clearAllBtn"
              class="bg-green-600 text-white px-4 py-2 rounded-full text-sm hover:bg-green-700 transition">
        <i class="fa-solid fa-check-double mr-2"></i> Mark All as Read
      </button>
    </div>
  </main>

  <!-- Footer -->
  <footer class="text-white py-12 mt-10" style="background-color: #1B5E20;">
    <div class="max-w-6xl mx-auto px-6 grid md:grid-cols-4 gap-8">
      <div>
        <h3 class="font-bold text-lg mb-3">The Farmer's Mall</h3>
        <p class="text-gray-300 text-sm">Fresh, organic produce delivered straight to your home from local farmers.</p>
      </div>
      <div>
        <h3 class="font-bold text-lg mb-3">Quick Links</h3>
        <ul class="space-y-2 text-sm text-gray-300">
          <li><a href="#" class="hover:underline">About Us</a></li>
          <li><a href="#" class="hover:underline">Contact</a></li>
          <li><a href="#" class="hover:underline">FAQ</a></li>
          <li><a href="#" class="hover:underline">Support</a></li>
        </ul>
      </div>
      <div>
        <h3 class="font-bold text-lg mb-3">Categories</h3>
        <ul class="space-y-2 text-sm text-gray-300">
          <li><a href="#" class="hover:underline">Vegetables</a></li>
          <li><a href="#" class="hover:underline">Fruits</a></li>
          <li><a href="#" class="hover:underline">Dairy</a></li>
          <li><a href="#" class="hover:underline">Meat</a></li>
        </ul>
      </div>
      <div>
        <h3 class="font-bold text-lg mb-3">Follow Us</h3>
        <div class="flex space-x-4 text-xl">
          <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-facebook"></i></a>
          <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-twitter"></i></a>
          <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </div>
    <div class="border-t border-green-800 text-center text-gray-300 text-sm mt-10 pt-6">
      Â© 2025 The Farmer's Mall. All rights reserved.
    </div>
  </footer>

  <!-- Script to include header -->
  <script>
    // Dynamically load header.html
    fetch('header.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById('header').innerHTML = data;

        // Highlight the notification icon once header is loaded
        const notifIcon = document.querySelector('a[href="notification.html"] i');
        if (notifIcon) {
          notifIcon.parentElement.classList.remove('text-gray-600');
          notifIcon.parentElement.classList.add('text-green-600');
        }

        // Add search functionality to the loaded header
        const headerSearchInput = document.querySelector('#header input[type="text"]');
        if (headerSearchInput) {
          const form = document.createElement('form');
          form.action = 'products.html';
          form.method = 'GET';
          headerSearchInput.name = 'search';
          headerSearchInput.parentElement.insertBefore(form, headerSearchInput);
          form.appendChild(headerSearchInput);
        }
      });
  </script>

  <!-- Script to handle notification actions -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const notificationList = document.getElementById('notificationList');
      const clearAllBtn = document.getElementById('clearAllBtn');
      let notifications = JSON.parse(localStorage.getItem('notifications')) || [];

      function renderNotifications() {
        notificationList.innerHTML = '';
        if (notifications.length === 0) {
          notificationList.innerHTML = '<p class="text-center text-gray-500 py-10">ðŸŽ‰ All caught up! No new notifications.</p>';
          clearAllBtn.style.display = 'none';
          return;
        }

        notifications.forEach(notif => {
          const notifDiv = document.createElement('div');
          notifDiv.className = 'p-5 flex items-start space-x-4 hover:bg-gray-50 transition';
          notifDiv.dataset.id = notif.id;

          let iconHtml = '';
          if (notif.type === 'order_placed') {
            iconHtml = `<div class="bg-green-100 text-green-700 p-3 rounded-full"><i class="fa-solid fa-box"></i></div>`;
          } else {
            iconHtml = `<div class="bg-blue-100 text-blue-700 p-3 rounded-full"><i class="fa-solid fa-info-circle"></i></div>`;
          }

          notifDiv.innerHTML = `
            ${iconHtml}
            <div class="flex-1">
              <p class="font-medium text-gray-800">${notif.title}</p>
              <p class="text-sm text-gray-500">${notif.message}</p>
              <span class="text-xs text-gray-400 block mt-1">${new Date(notif.timestamp).toLocaleString()}</span>
            </div>
            <button class="remove-notification text-gray-400 hover:text-red-500">
              <i class="fa-solid fa-xmark"></i>
            </button>
          `;
          notificationList.appendChild(notifDiv);
        });
      }

      function removeNotification(id) {
        notifications = notifications.filter(n => n.id != id);
        localStorage.setItem('notifications', JSON.stringify(notifications));
        renderNotifications();
      }

      function clearAllNotifications() {
        notifications = [];
        localStorage.setItem('notifications', JSON.stringify(notifications));
        renderNotifications();
      }

      // Event Listeners
      notificationList.addEventListener('click', (e) => {
        const removeBtn = e.target.closest('.remove-notification');
        if (removeBtn) {
          const notifDiv = removeBtn.closest('div[data-id]');
          if (notifDiv) {
            removeNotification(notifDiv.dataset.id);
          }
        }
      });

      clearAllBtn.addEventListener('click', () => {
        clearAllNotifications();
      });

      // Initial render
      renderNotifications();
    });
  </script>

</body>
</html>
